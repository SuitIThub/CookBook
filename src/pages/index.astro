---
import Layout from '../layouts/Layout.astro';
import { db } from '../lib/database';
import type { Recipe } from '../types/recipe';
import RecipeListHeader from '../components/recipe_list/RecipeListHeader.astro';
import RecipeCard from '../components/recipe_list/RecipeCard.astro';
import EmptyState from '../components/recipe_list/EmptyState.astro';

// Rezepte aus der Datenbank laden
let recipes: Recipe[] = [];
try {
  recipes = db.getAllRecipes();
} catch (error) {
  console.error('Error loading recipes from database:', error);
  recipes = [];
}
---

<Layout title="Kochbuch - Alle Rezepte">
  <div class="space-y-6">
    <!-- Header -->
    <RecipeListHeader recipeCount={recipes.length} />

    {recipes.length > 0 ? (
      <!-- Recipe Grid -->
      <div class="grid-responsive">
        {recipes.map((recipe) => (
          <RecipeCard recipe={recipe} />
        ))}
      </div>
    ) : (
      <!-- Empty State -->
      <EmptyState />
    )}
  </div>
</Layout>
