---
import Layout from '../layouts/Layout.astro';
import ShoppingListsHeader from '../components/shopping_list/ShoppingListsHeader.astro';
import ShoppingListCard from '../components/shopping_list/ShoppingListCard.astro';
import EmptyShoppingListsState from '../components/shopping_list/EmptyShoppingListsState.astro';
import { ShoppingListCreateModal } from '../components/modals';
import { db } from '../lib/database';

// Fetch shopping lists from the database
const shoppingLists = db.getAllShoppingLists();
---

<Layout title="Einkaufslisten - Kochbuch">
  <div class="space-y-6">
    <ShoppingListsHeader listCount={shoppingLists.length} />
    
    {shoppingLists.length > 0 ? (
      <div class="grid-responsive">
        {shoppingLists.map(shoppingList => (
          <ShoppingListCard shoppingList={shoppingList} />
        ))}
      </div>
    ) : (
      <EmptyShoppingListsState />
    )}
  </div>
  
  <!-- Create Shopping List Modal -->
  <ShoppingListCreateModal id="create-shopping-list-modal" />
</Layout> 